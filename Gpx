<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPX Viewer</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="map"></div>
    <input type="file" id="gpxFileInput" accept=".gpx">
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gpx.js/1.4.0/gpx.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
body, html {
    height: 100%;
    margin: 0;
    padding: 0;
}

#map {
    width: 100%;
    height: 90vh;
}

#gpxFileInput {
    display: block;
    margin: 10px auto;
}
document.addEventListener('DOMContentLoaded', () => {
    // Initialize the map
    const map = L.map('map').setView([51.505, -0.09], 13);

    // Add OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    // Handle GPX file input
    document.getElementById('gpxFileInput').addEventListener('change', handleFileSelect, false);

    function handleFileSelect(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const gpx = e.target.result;
                new L.GPX(gpx, {
                    async: true
                }).on('loaded', function(e) {
                    map.fitBounds(e.target.getBounds());
                }).addTo(map);
            };
            reader.readAsText(file);
        }
    }
});
